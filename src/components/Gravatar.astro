---
import md5 from 'md5'
import { useTranslate } from '@utils/i18n/useTranslate'
import type { Locale } from '@utils/i18n/locales'
import { twMerge } from 'tailwind-merge'

type Props = {
  locale: Locale
  baseWidth: number
  className?: string
}

const { baseWidth, className = '' } = Astro.props

const t = useTranslate(Astro.props.locale)

const email = 'phelipe_teles@hotmail.com'

const generateGravatarUrl = (width: number) =>
  `https://www.gravatar.com/avatar/${md5(email)}?s=${width}`
---

<img
  id='gravatar'
  class={twMerge(className, `rounded-full`)}
  srcset={`
    ${generateGravatarUrl(baseWidth)} 1x,
    ${generateGravatarUrl(baseWidth * 2)} 2x,
    ${generateGravatarUrl(baseWidth * 3)} 3x
  `}
  alt={t['GravatarAltText']}
  width={baseWidth}
  height={baseWidth}
/>
