{{ define "description" }}
  {{ .Summary }}
{{ end }}

{{ define "main" }}
  <main class="grid grid-cols-layout">
    <div
      class="col-full max-w-full rounded-none px-horizontal-padding pt-8 shadow-none sm:col-content sm:px-0"
    >
      <article>
        <header>
          <h1 class="mb-4 text-4xl">
            {{ .Title }}
          </h1>

          <div class="mb-4 flex flex-col gap-2">
            {{ partial "post-reading-time.html" . }}

            {{ partial "post-date.html" . }}
          </div>

          <div class="mb-4 flex flex-wrap gap-2">
            {{ range (.GetTerms "tags") }}
              <a href="{{ .RelPermalink }}" class="tag whitespace-nowrap">
                {{- .Title -}}
              </a>
            {{ end }}

            {{ partial "all-tags-button.html" . }}
          </div>
        </header>

        <hr class="my-8" />

        <div
          class="flex flex-col-reverse lg:grid lg:grid-cols-[1fr,minmax(0,1fr)]"
        >
          <div
            data-blog-post
            class="
              [&>pre]:full-width-on-mobile
              [&>figure]:full-width-on-mobile
              [&>[data-codeblock]]:full-width-on-mobile
              max-w-prose
              [&>[data-codeblock]_pre]:max-sm:rounded-none
              [&>[data-codeblock-with-header]]:mt-16
              [&_img]:mx-auto
              [&>hr]:border-0
              [&>hr]:text-center
              [&>hr]:after:content-['â‚']
              [&>pre]:my-8
              [&>figure]:my-8
              [&>blockquote]:my-8
              [&>figure_img]:bg-surface
              [&>figure_img]:sm:rounded
              [&>figure_video]:min-h-[15em]
              [&>figure_video]:bg-surface
              [&>figure_video]:sm:rounded
              [&_.katex-display]:overflow-x-auto
              [&_.katex-display]:overflow-y-hidden
            "
          >
            {{ .Content }}
          </div>

          <aside class="">
            {{ partial "toc.html" . }}
          </aside>
        </div>
      </article>

      <template data-theme-copy-code-tooltip-template>
        <div
          data-theme-copy-code-tooltip
          role="tooltip"
          class="pointer-events-none absolute rounded border border-divider bg-surface px-2"
          style="opacity: 0"
        >
          {{ i18n "Copied" }}


          <div
            data-arrow
            class="absolute h-[8px] w-[8px] rotate-45 border-r border-b border-divider bg-surface"
          ></div>
        </div>
      </template>

      <hr class="full-width-on-mobile mt-8" />

      <div class="full-width-on-mobile sm:my-8">
        {{ partial "post-nav.html" . }}
      </div>

      <hr class="full-width-on-mobile mb-8" />

      <template data-utterances-template>
        <div class="grid place-items-center">
          <div
            data-utterances-loading
            role="progressbar"
            class="[&_svg]:animate-spin [&_svg]:duration-[1500ms]"
          >
            {{ partial "svgs/loader.svg" }}
          </div>

          <script
            src="https://utteranc.es/client.js"
            data-repo="phelipetls/phelipetls.github.io"
            data-issue-term="pathname"
            crossorigin="anonymous"
            data-theme="github-light"
            async
          ></script>
        </div>

        <hr class="mt-8 hidden sm:block" />
      </template>
    </div>
  </main>
{{ end }}

{{ define "rootClass" }}
  scroll-smooth scroll-pt-nav-height sm:scroll-pt-0
{{ end }}

{{ define "head" }}
  {{ $darkSyntaxHighlight := resources.Get "css/dark-syntax-highlight.css" }}
  {{ $liteYoutubeEmbedCss := resources.Get "css/vendor/lite-yt-embed.css" | postCSS }}

  {{ if hugo.IsProduction }}
    {{ $darkSyntaxHighlight = $darkSyntaxHighlight | minify }}
    {{ $liteYoutubeEmbedCss = $liteYoutubeEmbedCss | minify }}
  {{ end }}


  <link rel="stylesheet" href="{{ $liteYoutubeEmbedCss.Permalink }}" />
  <link rel="stylesheet" href="{{ $darkSyntaxHighlight.RelPermalink }}" />
{{ end }}

{{ define "scripts" }}
  {{ $liteYoutubeEmbedJs := resources.Get "/js/vendor/lite-yt-embed.js" | js.Build }}
  {{ $themeUtterancesJs := resources.Get "/js/theme-utterances.ts" | js.Build }}
  {{ $tabsJs := resources.Get "/js/tabs.js" }}
  {{ $tocJs := resources.Get "/js/toc.ts" | js.Build }}
  {{ $htmlPreviewJs := resources.Get "/js/html-preview.ts" | js.Build }}
  {{ $htmlPreviewIframeJs := resources.Get "/js/html-preview-iframe.ts" | js.Build }}
  {{ $copyCodeButtonScript := resources.Get "/js/copy-code-button.ts" | js.Build }}

  {{ $bundle := slice $htmlPreviewJs $htmlPreviewIframeJs $liteYoutubeEmbedJs $themeUtterancesJs $tabsJs $tocJs $copyCodeButtonScript | resources.Concat "js/post-bundle.js" }}

  {{ if hugo.IsProduction }}
    {{ $bundle = $bundle | minify }}
  {{ end }}


  <script src="{{ $bundle.Permalink }}"></script>
{{ end }}
